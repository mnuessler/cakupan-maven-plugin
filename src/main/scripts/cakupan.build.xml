<project>
	<taskdef resource="cakupantasks.properties" />

	<target name="hello">
		<echo>Hello, World</echo>
		<echo>outputdir: ${instrument.outputDirectory}</echo>
		<echo>xsl.sourceDirectory: ${xsl.sourceDirectory}</echo>
		<echo>xsl.includes: ${xsl.includes}</echo>
	</target>

	<target name="instrument">
		<cakupan-instrument destdir="${instrument.outputDirectory}">
			<fileset dir="{xsl.sourceDirectory}" includes="**/*.xsl" />
		</cakupan-instrument>
	</target>

	<target name="test" description="Runs the unit tests">
		<delete dir="${junit.out.dir.xml}" />
		<mkdir dir="${junit.out.dir.xml}" />
		<junit printsummary="yes" haltonfailure="no">
			<!--sysproperty key="javax.xml.transform.TransformerFactory" value="com.cakupan.xslt.transform.XalanTransformerInstrumentFactoryImpl" 
				/ -->
			<sysproperty key="javax.xml.transform.TransformerFactory"
				value="com.cakupan.xslt.transform.SaxonCakupanTransformerInstrumentFactoryImpl" />
			<sysproperty key="cakupan.dir" value="${instrmtxslt.dir}" />
			<classpath refid="classpath.test" />
			<formatter type="xml" />
			<batchtest fork="yes" todir="${junit.out.dir.xml}">
				<fileset dir="${test.dir}" includes="**/*Test.java" />
			</batchtest>
		</junit>
	</target>

	<target name="report">
		<cakupan-report destdir="${report.outputDirectory}" />
	</target>

</project>
